{"id":"sw-1","title":"Phase 0: Project Setup","description":"Initialize repository, environments, and CI/CD","type":"feature","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":[],"labels":["epic","phase-0"]}
{"id":"sw-2","title":"Initialize Git repository and push to GitHub","description":"Create repo, add .gitignore, initial commit, push to GitHub","type":"task","priority":0,"status":"done","created_at":"2025-12-24T00:00:00Z","dependencies":[],"labels":["phase-0"]}
{"id":"sw-3","title":"Set up backend project structure","description":"Create Python project with FastAPI, requirements.txt, src/ layout per ARCHITECTURE.md","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-2"],"labels":["phase-0","backend"]}
{"id":"sw-4","title":"Set up dashboard project structure","description":"Create Next.js 14 project with App Router, Tailwind CSS per ARCHITECTURE.md","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-2"],"labels":["phase-0","dashboard"]}
{"id":"sw-5","title":"Create .env.example files","description":"Document all required environment variables for backend and dashboard","type":"task","priority":2,"status":"done","created_at":"2025-12-24T00:00:00Z","dependencies":[],"labels":["phase-0"]}
{"id":"sw-6","title":"Phase 1: Core Backend Infrastructure","description":"Database models, migrations, FastAPI setup","type":"feature","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-3"],"labels":["epic","phase-1"]}
{"id":"sw-7","title":"Create SQLAlchemy models for all entities","description":"Brand, RawEmail, ExtractedSale, SaleWindow, Prediction, PredictionOutcome, BrandAccuracyStats, AdjustmentSuggestion - all with UUID PKs, timestamps, proper relationships","type":"task","priority":0,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-3"],"labels":["phase-1","backend","database"]}
{"id":"sw-8","title":"Set up Alembic migrations","description":"Initialize Alembic, create initial migration with all tables, test upgrade/downgrade","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-7"],"labels":["phase-1","backend","database"]}
{"id":"sw-9","title":"Create database session management","description":"Async PostgreSQL connection with asyncpg, connection pooling, session factory, dependency injection for FastAPI","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-8"],"labels":["phase-1","backend","database"]}
{"id":"sw-10","title":"Add Pydantic schemas for all entities","description":"Request/response models with validation for Brand, Prediction, ExtractedSale, etc.","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-7"],"labels":["phase-1","backend"]}
{"id":"sw-11","title":"Implement CRUD operations for Brand","description":"Create, read, update, deactivate brands with validation in db/crud/brands.py","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-9"],"labels":["phase-1","backend"]}
{"id":"sw-12","title":"Create FastAPI application structure","description":"Main app in api/main.py, routers, dependency injection, CORS middleware, error handling","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-9"],"labels":["phase-1","backend"]}
{"id":"sw-13","title":"Implement /api/brands endpoints","description":"GET list (paginated), POST create, GET detail, PATCH update, DELETE deactivate, POST activate","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-10","sw-11","sw-12"],"labels":["phase-1","backend","api"]}
{"id":"sw-14","title":"Implement /api/health endpoint","description":"Basic health check returning status and DB connection status","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-12"],"labels":["phase-1","backend","api"]}
{"id":"sw-15","title":"Configure logging and error handling","description":"Structured JSON logging, global exception handler, request logging","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-12"],"labels":["phase-1","backend"]}
{"id":"sw-16","title":"Phase 2: Scraper & Extractor","description":"Milled.com scraping and Claude-based sale extraction","type":"feature","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-6"],"labels":["epic","phase-2"]}
{"id":"sw-17","title":"Implement Milled.com authentication","description":"Playwright login flow with session persistence, handle auth failures, cookie storage","type":"task","priority":0,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-6"],"labels":["phase-2","scraper"]}
{"id":"sw-18","title":"Implement brand page navigation","description":"Navigate to brand page (milled.com/stores/{slug}), apply date filters, handle pagination","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-17"],"labels":["phase-2","scraper"]}
{"id":"sw-19","title":"Implement email content extraction","description":"Extract subject, sent date, URL, full HTML content from each email page","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-18"],"labels":["phase-2","scraper"]}
{"id":"sw-20","title":"Implement scraper error handling","description":"Retry logic with exponential backoff, screenshot on failure, skip bad emails, alert on brand failure","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-19"],"labels":["phase-2","scraper"]}
{"id":"sw-21","title":"Create scraper entry point script","description":"CLI script (scripts/scrape.py) for manual runs and cron invocation with brand selection","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-20"],"labels":["phase-2","scraper"]}
{"id":"sw-22","title":"Implement historical backfill command","description":"Scrape full year of history for a brand with progress tracking","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-21"],"labels":["phase-2","scraper"]}
{"id":"sw-23","title":"Create Anthropic client wrapper","description":"Async client in extractor/llm.py, retry on rate limit, model selection (Haiku/Sonnet)","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-6"],"labels":["phase-2","extractor"]}
{"id":"sw-24","title":"Design extraction prompt","description":"Prompt in extractor/prompts.py for structured sale extraction with confidence scoring, JSON output","type":"task","priority":0,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":[],"labels":["phase-2","extractor"]}
{"id":"sw-25","title":"Implement Haiku extraction","description":"Primary extraction with Haiku 4.5, parse JSON response, store in extracted_sales table","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-23","sw-24"],"labels":["phase-2","extractor"]}
{"id":"sw-26","title":"Implement Sonnet fallback","description":"Re-process low-confidence (<0.7) extractions with Sonnet 4.5","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-25"],"labels":["phase-2","extractor"]}
{"id":"sw-27","title":"Implement extraction result parsing","description":"Parse LLM JSON response in extractor/parser.py, validate, map to ExtractedSale model","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-25"],"labels":["phase-2","extractor"]}
{"id":"sw-28","title":"Create extraction entry point","description":"CLI script to process pending emails, update database with results","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-26","sw-27"],"labels":["phase-2","extractor"]}
{"id":"sw-29","title":"Implement review queue logic","description":"Route low-confidence (<0.5) extractions to review queue, mark for human review","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-28"],"labels":["phase-2","extractor"]}
{"id":"sw-30","title":"Phase 3: Prediction Engine","description":"Deduplication, holiday detection, prediction generation","type":"feature","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-16"],"labels":["epic","phase-3"]}
{"id":"sw-31","title":"Implement sale deduplication","description":"Group related emails into sale windows based on dates (±3 days) and discount similarity in deduplicator/","type":"task","priority":0,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-28"],"labels":["phase-3","predictor"]}
{"id":"sw-32","title":"Create holiday calendar utility","description":"Functions in predictor/holidays.py to compute US holiday dates for any year (Memorial Day, Labor Day, Black Friday, etc.)","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":[],"labels":["phase-3","predictor"]}
{"id":"sw-33","title":"Implement holiday anchor detection","description":"Detect if sale is within ±3 days of a holiday, tag with holiday anchor","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-32"],"labels":["phase-3","predictor"]}
{"id":"sw-34","title":"Implement prediction date calculation","description":"Calculate predicted dates for target year with holiday adjustment (shift to current year's holiday date)","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-33"],"labels":["phase-3","predictor"]}
{"id":"sw-35","title":"Implement prediction generation","description":"Generate predictions from historical sale windows in predictor/engine.py, store in predictions table","type":"task","priority":0,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-31","sw-34"],"labels":["phase-3","predictor"]}
{"id":"sw-36","title":"Create prediction confidence scoring","description":"Score predictions based on historical consistency (same time, same discount pattern)","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-35"],"labels":["phase-3","predictor"]}
{"id":"sw-37","title":"Implement /api/predictions endpoints","description":"GET list (paginated, filterable), GET upcoming (next N days), GET detail by ID","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-35","sw-12"],"labels":["phase-3","backend","api"]}
{"id":"sw-38","title":"Create predictor entry point script","description":"CLI for manual prediction generation with year and brand parameters","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-35"],"labels":["phase-3","predictor"]}
{"id":"sw-39","title":"Phase 4: Calendar & Notifications","description":"Google Calendar sync and Resend email notifications","type":"feature","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-30"],"labels":["epic","phase-4"]}
{"id":"sw-40","title":"Set up Google Calendar API client","description":"Service account auth in calendar/client.py, calendar client wrapper with error handling","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-6"],"labels":["phase-4","calendar"]}
{"id":"sw-41","title":"Implement calendar event creation","description":"Create events from predictions with proper formatting (title, date, description with discount details)","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-40","sw-35"],"labels":["phase-4","calendar"]}
{"id":"sw-42","title":"Implement calendar event updates","description":"Update existing events when predictions change, delete cancelled predictions","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-41"],"labels":["phase-4","calendar"]}
{"id":"sw-43","title":"Implement calendar sync entry point","description":"CLI script to sync all pending predictions to calendar, track synced_to_calendar flag","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-42"],"labels":["phase-4","calendar"]}
{"id":"sw-44","title":"Set up Resend email client","description":"Resend SDK setup in notifier/email.py, email sending wrapper with templates","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-6"],"labels":["phase-4","notifier"]}
{"id":"sw-45","title":"Create email templates","description":"HTML templates for digest, summary, alerts using simple string templates","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-44"],"labels":["phase-4","notifier"]}
{"id":"sw-46","title":"Implement review digest email","description":"Daily email with pending review items and action links to dashboard","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-45","sw-29"],"labels":["phase-4","notifier"]}
{"id":"sw-47","title":"Implement weekly prediction summary","description":"Weekly email with upcoming predictions for the next 7 days","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-45","sw-35"],"labels":["phase-4","notifier"]}
{"id":"sw-48","title":"Create notifier entry point","description":"CLI for sending notifications manually (digest, summary)","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-46","sw-47"],"labels":["phase-4","notifier"]}
{"id":"sw-49","title":"Phase 5: Dashboard MVP","description":"Next.js dashboard with brand management, review queue, predictions","type":"feature","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-4","sw-13"],"labels":["epic","phase-5"]}
{"id":"sw-50","title":"Create API client for dashboard","description":"Typed fetch wrapper in lib/api.ts for backend API with error handling, cache control","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-4","sw-13"],"labels":["phase-5","dashboard"]}
{"id":"sw-51","title":"Set up dashboard layout and navigation","description":"App layout with sidebar, navigation components, Tailwind styling in app/layout.tsx","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-50"],"labels":["phase-5","dashboard"]}
{"id":"sw-52","title":"Implement home/overview page","description":"Quick stats (upcoming predictions, review queue, active brands, hit rate), recent predictions list in app/page.tsx","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-51"],"labels":["phase-5","dashboard"]}
{"id":"sw-53","title":"Implement brands list page","description":"List brands with status, slug, excluded categories in app/brands/page.tsx with Add Brand button","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-51"],"labels":["phase-5","dashboard"]}
{"id":"sw-54","title":"Implement add brand form","description":"Form to add new brand with name, slug, exclusions in app/brands/new/page.tsx","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-53"],"labels":["phase-5","dashboard"]}
{"id":"sw-55","title":"Implement brand detail page","description":"Brand info, email history, predictions, accuracy in app/brands/[id]/page.tsx","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-53"],"labels":["phase-5","dashboard"]}
{"id":"sw-56","title":"Implement review queue page","description":"List pending reviews with approve/reject actions in app/review/page.tsx","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-51","sw-29"],"labels":["phase-5","dashboard"]}
{"id":"sw-57","title":"Implement /api/review endpoints","description":"GET list of pending reviews, POST approve, POST reject","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-29","sw-12"],"labels":["phase-5","backend","api"]}
{"id":"sw-58","title":"Implement predictions page","description":"List predictions with filters (brand, date range, status) in app/predictions/page.tsx","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-51","sw-37"],"labels":["phase-5","dashboard"]}
{"id":"sw-59","title":"Implement accuracy page","description":"Overall stats, per-brand table, recent outcomes in app/accuracy/page.tsx","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-51"],"labels":["phase-5","dashboard"]}
{"id":"sw-60","title":"Phase 6: Feedback Loop","description":"Outcome verification, accuracy tracking, adjustment suggestions","type":"feature","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-49"],"labels":["epic","phase-6"]}
{"id":"sw-61","title":"Implement auto-verification logic","description":"Check if predicted sales occurred by scraping brand during prediction window, mark HIT/MISS in verifier/","type":"task","priority":0,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-35","sw-19"],"labels":["phase-6","verifier"]}
{"id":"sw-62","title":"Implement manual override API","description":"POST endpoint /api/predictions/{id}/override to correct auto-verification with reason","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-61","sw-12"],"labels":["phase-6","backend","api"]}
{"id":"sw-63","title":"Implement accuracy calculation","description":"Calculate per-brand stats (hit rate, reliability tier) in verifier/accuracy.py, store in brand_accuracy_stats","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-61"],"labels":["phase-6","verifier"]}
{"id":"sw-64","title":"Implement suggestion generation","description":"Detect timing shifts, pattern changes, generate adjustment_suggestions with recommended calibration","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-63"],"labels":["phase-6","verifier"]}
{"id":"sw-65","title":"Implement /api/accuracy endpoints","description":"GET overall stats, GET per-brand stats, GET suggestions list","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-63","sw-12"],"labels":["phase-6","backend","api"]}
{"id":"sw-66","title":"Implement /api/suggestions endpoints","description":"POST approve suggestion, POST dismiss suggestion with reason","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-64","sw-12"],"labels":["phase-6","backend","api"]}
{"id":"sw-67","title":"Add outcome override to dashboard","description":"Override button on accuracy page outcomes list, modal with reason field","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-62","sw-59"],"labels":["phase-6","dashboard"]}
{"id":"sw-68","title":"Add suggestions section to dashboard","description":"Display pending suggestions on accuracy page with approve/dismiss buttons","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-66","sw-59"],"labels":["phase-6","dashboard"]}
{"id":"sw-69","title":"Implement accuracy alert emails","description":"Send alert when brand drops below 60% hit rate threshold","type":"task","priority":3,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-63","sw-44"],"labels":["phase-6","notifier"]}
{"id":"sw-70","title":"Phase 7: Testing & Polish","description":"Test coverage, bug fixes, documentation, final polish","type":"feature","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-60"],"labels":["epic","phase-7"]}
{"id":"sw-71","title":"Write unit tests for extractor","description":"Test extraction parsing, confidence scoring, JSON validation in tests/test_extractor.py","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-28"],"labels":["phase-7","testing"]}
{"id":"sw-72","title":"Write unit tests for predictor","description":"Test date calculation, holiday anchoring, deduplication in tests/test_predictor.py","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-35"],"labels":["phase-7","testing"]}
{"id":"sw-73","title":"Write integration tests for API","description":"Test all endpoints with test database in tests/test_api.py","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-13","sw-37","sw-57","sw-65"],"labels":["phase-7","testing"]}
{"id":"sw-74","title":"Write E2E test for full pipeline","description":"Scrape (mocked) ’ Extract ’ Deduplicate ’ Predict ’ Verify in tests/test_pipeline.py","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-61"],"labels":["phase-7","testing"]}
{"id":"sw-75","title":"Set up cron jobs on Railway","description":"Configure weekly scrape (Sunday), daily verification, daily digest emails using Railway cron","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-21","sw-61","sw-46"],"labels":["phase-7","infrastructure"]}
{"id":"sw-76","title":"Perform initial backfill for all brands","description":"Run historical scrape for 1 year of data for all 10 target brands","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-22"],"labels":["phase-7","data"]}
{"id":"sw-77","title":"Configure Railway backend deployment","description":"Link repo, configure build command, add PostgreSQL addon, set all env vars","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-6"],"labels":["phase-0","infrastructure"]}
{"id":"sw-78","title":"Configure Vercel dashboard deployment","description":"Link repo, set root directory to dashboard/, configure NEXT_PUBLIC_API_URL","type":"task","priority":1,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-49"],"labels":["phase-0","infrastructure"]}
{"id":"sw-79","title":"Implement /api/system trigger endpoints","description":"POST /api/scrape/trigger, /api/extract/trigger, /api/deduplicate/trigger, /api/predict/trigger, /api/pipeline/trigger for manual pipeline runs","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-21","sw-28","sw-31","sw-38"],"labels":["phase-3","backend","api"]}
{"id":"sw-80","title":"Add NoCacheMiddleware to FastAPI","description":"Middleware to add Cache-Control, Pragma, Expires headers to prevent stale data issues","type":"task","priority":2,"status":"open","created_at":"2025-12-24T00:00:00Z","dependencies":["sw-12"],"labels":["phase-1","backend"]}
